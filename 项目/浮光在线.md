# 1. 项目开发基础概念

所谓项目，就是一个针对某个商业模式而定下的目标开展的一次有时间性或无限期的工作任务。

## 1.1 常见的web项目类型

1. 商城，以商业交易为主，把传统的商业交易以互联网IT技术来实现的网站

   1.1 B2C  **直销商城**  商家与会员直接交易  ( Business To Customer )  

   ​	鸿星尔克、361。。

   1.2 B2B  **批发商城**  商家与商家直接交易

   ​	阿里巴巴、钢材批发网站、服装批发、化工产品批发

   1.3 B2B2C   **购物平台**   进驻商家和会员在另一个商家提供的平台上面进行交易

   ​	天猫、京东、当当网

   1.4 C2B   **定制商城**   会员向商家发起定制商品的需求，商家照单去完成。

   ​	旅游路线定制、早期小米、互联网+、3D打印、服装定制

   1.5 O2O  线上线下交易平台 [Online To Offline]  

   ​	外卖、专车、旅拍、共享打车、12306、飞毛腿、

   1.6 C2C   二手交易平台，会员与会员之间的交易、网站不参与到商业中。

   ​	淘宝、孔夫子二手书、转转、闲鱼、

   

2. 门户网站[企业站和门户站]，以信息发布为主的，把企业、组织、机构的政策、历史、动态、产品对外发布的网站。

   1. 网易门户、腾讯门户、搜狐门户

   2. 各大高校的官网、

   3. 各大公司的官网、

   4. 各大银行、政府、医院的官网

      

3. 社交网络，以用户之间的社交属性的行为为主，让用户可以通过项目可以进行交友、交流、搭讪的网站。

   1. 陌陌、微信、豆瓣、。。。

4. 资讯论坛，以有时效性的信息为主，让用户可以在项目中可以进行交流和互通各种时效信息的网站。

   1. 贴吧、虎扑、boss直聘、前程无忧、猎聘

5. 内部系统，以权限为主的信息管理，不会对外开放，企业内部人员使用的。

   1. OA、在线办公系统，基于编程开发实现自动化办公的项目、python自动化办公
   2. CRM、客户关系管理系统，基于编程开发实现客户端关系的管理，完成销售阶段的资源共享和分配。
   3. ERP、企业权限管理系统，基于生产线进行物资、生成品控管理的网站。
   4. ERM、企业资源管理，CRM和ERP的结合出现的产物

6. 个人博客，以个人信息共享为主的非商业性的网站

   1. 技术博客
   2. 摄影博客
   3. 日志空间

   

7. 内容收费站，以网站内容限流收费为主。常见于VIP、会员充值、内容购买

   1. 爱奇艺、腾讯视频、哔哩哔哩、
   2. 漫画网、小说网、起点中文网、游戏充值网站
   3. 音乐网、视频网站、UI素材网站

浮光在线教育 ----> B2C的在线教育商城、

## 1.2 企业项目开发流程

![开发流程](%E6%B5%AE%E5%85%89%E5%9C%A8%E7%BA%BF.assets/%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B.png)

 原型策划的开发软件：Axure、墨刀

UI设计开发工具：photoshop、firework、coredraw

​          具有图层分离效果：png、psd

web前端开发人员，根据UI设计狮提供的设计稿（png、psd），进行拆板（使用HTML、CSS、js高度还原设计稿的效果制作成HTML静态网页）。

![img](%E6%B5%AE%E5%85%89%E5%9C%A8%E7%BA%BF.assets/c0a4ede2ba0d4a7302763a65.jpg)



## 1.3 立项申请阶段

立项其实就是对产品项目能不能做和怎么做，提出理论基础。大的互联网公司都有比较正规的立项流程。

![img](%E6%B5%AE%E5%85%89%E5%9C%A8%E7%BA%BF.assets/20180601170947776.png)

通常公司内部要研发一款软硬件的产品之前，都要经过市场评估和调研分析，产生一份`产品项目立项报告`给公司。

产品项目立项报告一般包含以下内容：

```
项目概述[1. 项目总体概述，2. 市场价值，3 整体架构]
需求市场
需求分析和项目建设的必要性
业务分析
总体建设方案
项目风险和风险管理
可行性分析阶段
```

参考资料：<https://blog.csdn.net/m0_37370820/article/details/81077886>



# 2. 需求分析

## 2.1 首页

功能：

导航菜单（顶级菜单，侧边栏菜单，课程分类菜单）、轮播广告图、快捷登陆注册和退出登录、课程搜索、新课推荐、热门课程推荐

![image-20210706012148572](%E6%B5%AE%E5%85%89%E5%9C%A8%E7%BA%BF.assets/image-20210706012148572.png)



## 2.2 登录注册

功能：用户登录、第三方验证码、多条件登录、记住密码、短信发送、短信冷却倒计时、jwt认证

![image-20210706014650496](%E6%B5%AE%E5%85%89%E5%9C%A8%E7%BA%BF.assets/image-20210706014650496.png)

![image-20210706014757381](%E6%B5%AE%E5%85%89%E5%9C%A8%E7%BA%BF.assets/image-20210706014757381.png)



## 2.3 课程列表

功能：学习方向、课程分类、课程列表、课程多条件筛选展示、课程分类展示、课程分页展示、课程章节课时展示、课程优惠策略

![image-20210706012148573.png](%E6%B5%AE%E5%85%89%E5%9C%A8%E7%BA%BF.assets/image-20210706012148573.png)



## 2.4 课程详情

功能：课程信息展示、优惠活动设置、视频播放、富文本编辑器

![image-20210706020625648](%E6%B5%AE%E5%85%89%E5%9C%A8%E7%BA%BF.assets/image-20210706020625648.png)

## 2.5 购物车

功能：购物车商品列表、添加商品、删除商品、勾选商品状态、商品结算、订单生成、唯一订单号生成

![image-20210706020607506](%E6%B5%AE%E5%85%89%E5%9C%A8%E7%BA%BF.assets/image-20210706020607506.png)



## 2.6 商品结算

功能：订单商品信息列表、订单信息展示、积分计算功能、优惠券、第三方支付平台接口集成

![image-20210706020359871](%E6%B5%AE%E5%85%89%E5%9C%A8%E7%BA%BF.assets/image-20210706020359871.png)



## 2.7 购买成功

功能：订单状态切换，购物课程记录展示，学习记录

![1553138273460.png](%E6%B5%AE%E5%85%89%E5%9C%A8%E7%BA%BF.assets/1553138273460.png)

## 2.8 个人中心

功能列表：我的订单、订单状态改变

![image-20210706021239127](%E6%B5%AE%E5%85%89%E5%9C%A8%E7%BA%BF.assets/image-20210706021239127.png)



## 2.9 我的课程及课程学习

功能：视频加密播放，课件下载，进度跟踪

![image-20210706021623323](%E6%B5%AE%E5%85%89%E5%9C%A8%E7%BA%BF.assets/image-20210706021623323.png)



# 3. 环境搭建

## 3.1 创建虚拟环境

anaconda、virtualenv、miniconda

```python
cd ~/Desktop
conda create -n fuguang python=3.8
```



## 3.2 相关命令复习

```python
# anaconda
创建虚拟环境：               conda create -n 虚拟环境名称 python=版本号
查看所有虚拟环境：           conda env list
使用虚拟环境：               source activate 虚拟环境名称
退出当前虚拟环境：           conda deactivate
删除虚拟环境（必须先退出虚拟环境内部才能删除当前虚拟环境）:
                           conda remove -n 虚拟环境名称 --all
在当前虚拟环境安装模块       conda install -c conda-forge 包名==版本号
在当前虚拟环境移除模块       conda remove  包名
其他相关命令：
查看虚拟环境中安装的包：              pip freeze  或者 pip list
收集当前环境中安装的包及其版本：        pip freeze > requirements.txt
在部署项目的服务器中安装项目使用的模块： pip install -r requirements.txt
```

提示:

- 虚拟环境只会管理环境内部的模块和python解析器,对于源代码是毫无关系

- 创建虚拟环境需要联网
- 创建成功后, 需要手动切换到虚拟环境中
- 工作在虚拟环境上, 提示符最前面会出现 “(虚拟环境名称)”



## 3.3 技术选型

### 外部依赖

1. 注册支付宝的开发者账号。https://open.alipay.com/platform/home.htm

2. 注册阿里云账号,如果可以购买一个ESC服务器，[先不要买。可以在项目第10天的再买]

3. 注册[容联云短信接口](https://www.yuntongxun.com/)平台的账号 。

4. 注册保利威视频服务平台的账号[先不要注册，有个7天免费的测试开发时间，项目最后第2天注册]

5. 注册gitee[码云]的账号。等下课间就要注册。

6. 如果有条件的,可以申请一个域名进行备案[ICP备案和公安部备案],如果没有的话, 可以注册natapp

   在哪里买的服务器，最好就在哪里买域名。不在同一个平台购买的话备案有问题的。

7. 开通阿里云OSS对象存储。

8. 注册一个163邮箱。

9. 注册百度地图开发者。

### 依赖包安装

```
pip install django==3.2.5  -i https://pypi.douban.com/simple

pip install djangorestframework  -i https://pypi.douban.com/simple

pip install Pillow  -i https://pypi.douban.com/simple

conda install  -c conda-forge PymySQL
```

### 服务器架构

![image-20210707113052025](%E6%B5%AE%E5%85%89%E5%9C%A8%E7%BA%BF.assets/image-20210707113052025.png)

# 4. 搭建项目

## 4.1 创建服务端项目

```python
cd ~/Desktop
# 创建工程目录，将来在这个目录下创建服务端项目和客户端项目。
mkdir fuguang
cd fuguang
# 创建api服务端项目
django-admin startproject fuguangapi
```



## 4.3 打开项目

在pycharm中打开项目

![image-20210707113606335](%E6%B5%AE%E5%85%89%E5%9C%A8%E7%BA%BF.assets/image-20210707113606335.png)

设置虚拟环境

![image-20210707113637356](%E6%B5%AE%E5%85%89%E5%9C%A8%E7%BA%BF.assets/image-20210707113637356.png)

![image-20210707113708576](%E6%B5%AE%E5%85%89%E5%9C%A8%E7%BA%BF.assets/image-20210707113708576.png)

![image-20210707113810662](%E6%B5%AE%E5%85%89%E5%9C%A8%E7%BA%BF.assets/image-20210707113810662.png)

![image-20210707113829279](%E6%B5%AE%E5%85%89%E5%9C%A8%E7%BA%BF.assets/image-20210707113829279.png)

![image-20210707114003988](%E6%B5%AE%E5%85%89%E5%9C%A8%E7%BA%BF.assets/image-20210707114003988.png)

启动django项目

![image-20210707114205272](%E6%B5%AE%E5%85%89%E5%9C%A8%E7%BA%BF.assets/image-20210707114205272.png)

点选右上角的manage，修改启动参数

![image-20210707114245606](%E6%B5%AE%E5%85%89%E5%9C%A8%E7%BA%BF.assets/image-20210707114245606.png)

![image-20210707114314627](%E6%B5%AE%E5%85%89%E5%9C%A8%E7%BA%BF.assets/image-20210707114314627.png)

![image-20210707114518883](%E6%B5%AE%E5%85%89%E5%9C%A8%E7%BA%BF.assets/image-20210707114518883.png)

点击运行项目，访问地址：`http://127.0.0.1:8000`，效果：

![1557367991756](%E6%B5%AE%E5%85%89%E5%9C%A8%E7%BA%BF.assets/1557367991756.png)

提示：

```
在pycharm中如果要使用已经创建好的虚拟环境，则必须设置pycharm中的python解释器，设置为虚拟环境中的python。
```



## 4.2 调整目录

```
fuguang/                  # 工程目录
  ├── docs/               # 项目相关资料保存目录
  ├── fuguangweb/         # 前端项目目录
  ├── fuguangapi/         # api服务端项目目录
       ├── manage.py
       ├── logs/          # 项目运行时/开发时日志目录
       ├── fuguangapi/     # 项目主应用，开发时的代码保存
       │    ├── apps/      # 开发者的代码保存目录，以模块[子应用]为目录保存
       │    ├── libs/      # 第三方类库的保存目录[第三方组件、模块]
       │    ├── settings/
       │         ├── dev.py   # 项目开发时的本地配置[不需要上传到线上或者服务器]
       │         ├── prod.py  # 项目上线时的运行配置
       │    ├── urls.py    # 总路由
       │    └── utils/     # 多个模块[子应用]的公共函数类库[自己开发的组件]
       └── scripts/       # 保存项目运营时的维护项目脚本文件
```

在pycharm编辑器中开发服务端项目时,必须指定项目目录才能运行，例如,开发后端项目,则必须选择的目录是fuguangapi



### 4.2.1 分不同运行环境进行项目配置

开发者本地的环境、目录、数据库密码和线上的服务器都会不一样,所以我们的配置文件可以针对不同的系统分成多分.

1. 在项目主应用fuguangapi下,创建一个settings的配置文件存储目录
2. 根据线上线下两种情况分别创建2个配置文件 dev.py和prod.py
3. 把原来项目主应用的settings.py配置文件改名，并把内容复制2份到dev.py和prod.py里面
4. 修改mange.py中加载配置的路径。

新的目录settings:

![1557368720318](%E6%B5%AE%E5%85%89%E5%9C%A8%E7%BA%BF.assets/1557368720318.png)

接下来,就可以根据在manage.py中根据不同的情况导入对应的配置文件了。

![image-20210707120425937](%E6%B5%AE%E5%85%89%E5%9C%A8%E7%BA%BF.assets/image-20210707120425937.png)



## 4.3 创建代码版本

在当前项目中，我们开发的工程包含了2个项目：api服务端和vite客户端。所以，一般在企业中，往往都是针对不同的项目创建不同的仓库，但是这里，我们现在学习的时候是没有那么人手的。所以我们针对当前整个工程搭建一个git即可。

cd进入到自己希望存储代码的目录路径，并创建本地仓库.git【pycharm直接打开终端就是项目根目录了。无须cd了】
新创建的本地仓库.git是个空仓库

```python
cd ~/Desktop/fuguang
git init
```

![image-20210906162807127](%E6%B5%AE%E5%85%89%E5%9C%A8%E7%BA%BF.assets/image-20210906162807127.png)

### 4.3.1 配置用户名和邮箱

```bash
git config user.name 'mooluo'
git config user.email '649641514@qq.com'

# git config --global user.name 'moluo'
# git config --global user.email '649641514@qq.com'
```



## 4.4 在gitee平台创建工程对应的仓库

1） 这里我们是学习，所以我这创建公有项目库

![image-20210906153341474](%E6%B5%AE%E5%85%89%E5%9C%A8%E7%BA%BF.assets/image-20210906153341474.png)

![image-20210906153359617](%E6%B5%AE%E5%85%89%E5%9C%A8%E7%BA%BF.assets/image-20210906153359617.png)

选择git-flow自定义分支模型。

创建私有空仓库以后的界面:

![image-20210708111504048](%E6%B5%AE%E5%85%89%E5%9C%A8%E7%BA%BF.assets/image-20210708111504048.png)

![image-20210906154121174](%E6%B5%AE%E5%85%89%E5%9C%A8%E7%BA%BF.assets/image-20210906154121174.png)

2）使用ssh连接git仓库

```python
# 例如我的码云是 649641514@qq.com
ssh-keygen -t rsa -C "649641514@qq.com"
cat /home/moluo/.ssh/id_rsa.pub # 把公钥进行复制到码云平台上 https://gitee.com/profile/sshkeys

# 切换项目的连接地址
git remote remove origin # 删除仓库地址
git remote add origin git@gitee.com:mooluo_admin/fuguang35.git  # 新仓库地址
```

![image-20210708123023607](%E6%B5%AE%E5%85%89%E5%9C%A8%E7%BA%BF.assets/image-20210708123023607.png)

![image-20210708123348356](%E6%B5%AE%E5%85%89%E5%9C%A8%E7%BA%BF.assets/image-20210708123348356.png)

![image-20210708123505051](%E6%B5%AE%E5%85%89%E5%9C%A8%E7%BA%BF.assets/image-20210708123505051.png)

![image-20210708123534335](%E6%B5%AE%E5%85%89%E5%9C%A8%E7%BA%BF.assets/image-20210708123534335.png)

```bash
git remote remove origin
git remote add origin git@gitee.com:mooluo_admin/fuguang35.git
```



3）删除不必要的分支，并创建并切换分支到develop

```bash
# 删除远程分支
# git push <远程仓库别名> --delete <分支名称>
git push origin --delete dev # 如果自己的线上没有该分支，则不需要执行这句
git checkout -b develop # 创建本地分支develop,develop是自定义分支模型(git-flow)中属于开发分支
```

git提交代码版本并同步到远程服务器

```shell
cd ~/Desktop/fuguang
git add .         # 添加代码到上传队列
git commit -m '项目初始化'  # 提交代码到本地仓库， -m 表示本次提交的描述
git push origin master
```



如果推送代码,出现以下提示: git pull ....,则表示当前本地的代码和线上的代码版本不同.

```bash
1. 把线上的代码执行以下命令,拉取到本地,进行同步
git pull

2. 根据提示,移除多余的冲突的文件,也可以删除.
完成这些步骤以后,再次add,commit,push即可.
```



接下来，我们就把上面创建好的本地项目提交到gitee码云上面

```bash
# .表示当前目录下所有的文件或目录提交到上传队列[上传队列也叫"暂存区"]
git add .

# 把本地上传队列的代码提交到本地仓库
git commit -m "项目初始化搭建"

# 提交代码给远程仓库
git push -u origin master
```

最终，成功提交了代码版本到gitee平台。效果：

![image-20210906164839005](%E6%B5%AE%E5%85%89%E5%9C%A8%E7%BA%BF.assets/image-20210906164839005.png)

使用``.gitignore``把一些垃圾文件或不必要记录版本历史的文件/目录过滤掉。

```bash
cd ~/Desktop/fuguang

# 先删除掉本地存在的，而.gitignore中要忽略的文件。
# 同步到线上仓库

# 新建git忽略文件
vim .gitignore

# .gitignore的内容
**/.idea/
**.sqlite3
**/__pycache__/
*.log

# :wq 保存文件
git add .
git commit -m "新建忽略文件"
git push -u origin master
```

开发时我们经常会使用pycharm的提供的git管理工具来完成代码的拉取和推送。

推送本地新建的develop分支到远程git仓库

```bash
git push origin develop
```



## 4.5 日志配置

https://docs.djangoproject.com/zh-hans/3.2/topics/logging/

ELK日志分析系统（ E=Elasticsearch搜索引擎,L=Logstash日志分析器,K=Kibana 消息中间件）。



这里我们基于djhango开发，我们先使用logging日志。 Django 使用 Python 内置的logging 模块处理系统日志。 

日志级别，从严重程度从高往低，一共分了5个等级。

由log模块默认提供了5个操作方法，分别可以记录以下5个等级日志的。

 ```bash
CRITICAL（fatal）：  致命错误，程序根本跑不起来。
ERROR：              运行错误，程序运行发生错误的地方时就会退出。
WARNING：            运行警告，程序运行发生警告的方法时会显示警告提示，但是程序会继续往下执行。
INFO：               运行提示，一般的系统信息
DEBUG：              调试信息，排查故障时使用的低级别系统信息
 ```



在settings/dev.py文件中追加如下配置：

```python
# 日志
LOGGING = {
    'version': 1, # 使用的日志模块的版本，目前官方提供的只有版本1，但是官方有可能会升级，为了避免升级出现的版本问题，所以这里固定为1
    'disable_existing_loggers': False, # 是否禁用其他的已经存在的日志功能？肯定不能，有可能有些第三方模块在调用，所以禁用了以后，第三方模块无法捕获自身出现的异常了。
    'formatters': { # 日志格式设置，verbose或者simple都是自定义的
        'verbose': { # 详细格式，适合用于开发人员不在场的情况下的日志记录。
            # 格式定义：https://docs.python.org/3/library/logging.html#logrecord-attributes
            # levelname 日志等级
            # asctime   发生时间
            # module    文件名
            # process   进程ID
            # thread    线程ID
            # message   异常信息
            'format': '{levelname} {asctime} {module} {process:d} {thread:d} {message}',
            'style': '{', # 变量格式分隔符
        },
        'simple': { # 简单格式，适合用于开发人员在场的情况下的终端输出
            'format': '{levelname} {message}',
            'style': '{',
        },
    },
    'filters': {  # 过滤器
        'require_debug_true': {
            '()': 'django.utils.log.RequireDebugTrue',
        },
    },
    'handlers': { # 日志处理流程，console或者mail_admins都是自定义的。
        'console': {
            'level': 'DEBUG', # 设置当前日志处理流程中的日志最低等级
            'filters': ['require_debug_true'], # 当前日志处理流程的日志过滤
            'class': 'logging.StreamHandler',  # 当前日志处理流程的核心类，StreamHandler可以帮我们把日志信息输出到终端下
            'formatter': 'simple'              # 当前日志处理流程的日志格式
        },
        # 'mail_admins': {
        #     'level': 'ERROR',                  # 设置当前日志处理流程中的日志最低等级
        #     'class': 'django.utils.log.AdminEmailHandler',  # AdminEmailHandler可以帮我们把日志信息输出到管理员邮箱中。
        #     'filters': ['special']             # 当前日志处理流程的日志过滤
        # }
        'file': {
            'level': 'INFO',
            'class': 'logging.handlers.RotatingFileHandler',
            # 日志位置,日志文件名，日志保存目录logs必须手动创建
            'filename': BASE_DIR.parent / "logs/fuguang.log",
            # 单个日志文件的最大值，这里我们设置300M
            'maxBytes': 300 * 1024 * 1024,
            # 备份日志文件的数量，设置最大日志数量为10
            'backupCount': 10,
            # 日志格式:详细格式
            'formatter': 'verbose'
        },
    },
    'loggers': {  # 日志处理的命名空间
        'django': {
            'handlers': ['console','file'], # 当基于django命名空间写入日志时，调用那几个日志处理流程
            'propagate': True,   # 是否在django命名空间对应的日志处理流程结束以后，冒泡通知其他的日志功能。True表示允许
        },
    }
}
```

提交一个git版本。

```bash
cd ~/Desktop/fuguang
git add .
git commit -m "日志初始化"
git push origin develop
```



## 4.6 异常处理

新建utils/exceptions.py

```python
from rest_framework.views import exception_handler

from django.db import DatabaseError
from rest_framework.response import Response
from rest_framework import status

import logging
logger = logging.getLogger('django')


def custom_exception_handler(exc, context):
    """
    自定义异常处理
    :param exc: 异常类
    :param context: 抛出异常的上下文
    :return: Response响应对象
    """
    # 调用drf框架原生的异常处理方法
    response = exception_handler(exc, context)

    if response is None:
        view = context['view']
        if isinstance(exc, DatabaseError):
            # 数据库异常
            logger.error('[%s] %s' % (view, exc))
            response = Response({'message': '服务器内部错误'}, status=status.HTTP_507_INSUFFICIENT_STORAGE)

    return response
```



settings/dev.py配置文件中添加

```python
# drf配置
REST_FRAMEWORK = {
    # 自定义异常处理
    'EXCEPTION_HANDLER': 'fuguangapi.utils.exceptions.custom_exception_handler',
}
```



## 4.7 创建数据库

```mysql
mysql -uroot -p123
create database fuguang;

# 如果使用的数据库是低于8.0，使用下面的语句
# create database fuguang default charset=utf8mb4;
```



为当前项目创建数据库用户[这个用户只能看到这个数据库]

```mysql
# 8.0版本以上的mysql/MariaDB10.3
# 创建用户：create user '用户名'@'主机地址' identified by '密码';
create user 'fuguang_user'@'%' identified by 'fuguang';  # %表示任意主机都可以通过当前账户登录到mysql
# 分配权限：grant 权限选项 on 数据库名.数据表 to 'fuguang_user'@'%' with grant option;
grant all privileges on fuguang.* to 'fuguang_user'@'%' with grant option;

# create user 'xiaoming'@'%' identified by 'xiaoming';
# grant select,insert on homework.* to 'xiaoming'@'%' with grant option;




# mysql8.0/MariaDB10.3版本以下，创建数据库用户并设置数据库权限给当前新用户，并刷新内存中的权限记录
create user fuguang_user identified by 'fuguang';
grant all privileges on fuguang.* to 'fuguang_user'@'%';
flush privileges;
```

使用pycharm连接mysql数据库。

![image-20210709114342742](%E6%B5%AE%E5%85%89%E5%9C%A8%E7%BA%BF.assets/image-20210709114342742.png)

![image-20210709114311665](%E6%B5%AE%E5%85%89%E5%9C%A8%E7%BA%BF.assets/image-20210709114311665.png)



## 4.8 配置数据库连接

### 4.8.1 MySQL

连接池

```bash
pip install django-db-connection-pool
pip install cryptography
```

打开settings/dev.py文件，并配置

```python
DATABASES = {
    # 'default': {
    #     'ENGINE': 'django.db.backends.sqlite3',
    #     'NAME': BASE_DIR / 'db.sqlite3',
    # }
    'default': {
        # 'ENGINE': 'django.db.backends.mysql',
        'ENGINE': 'dj_db_conn_pool.backends.mysql',
        'NAME': 'fuguang',
        'PORT': 3306,
        'HOST': '127.0.0.1',
        'USER': 'fuguang_user',
        'PASSWORD': 'fuguang',
        'OPTIONS': {
            'charset': 'utf8mb4', # 连接选项配置,mysql8.0以上无需配置
        },
        'POOL_OPTIONS' : {      # 连接池的配置信息
            'POOL_SIZE': 10,    # 连接池默认创建的链接对象的数量
            'MAX_OVERFLOW': 10  # 连接池默认创建的链接对象的最大数量
        }
    }
}
```



在项目主应用下的 `fuguangapi.__init__.py`中导入pymysql

```python
import pymysql

pymysql.install_as_MySQLdb()
```

使用git记录代码版本

```bash
cd ~/Desktop/fuguang
git add .
git commit -m "mysql数据库初始化"
git push origin develop
```

