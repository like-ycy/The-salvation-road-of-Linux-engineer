

## 客户端项目创建

我们使用的vue-cli脚手架作为我们前端开发使用的框架

官网地址：https://cli.vuejs.org/zh/



### Vue-cli的安装

2.9.x

vue-cli需要的安装和运行需要借助到node.js的环境(换句话说也是js代码的解释器)

#### Node.js的安装

一般前端也有一个类似anaconda的node版本管理工具。叫nvm。可以方便在开发机子中安装多个不同版本的nodejs。

##### nvm工具安装node.js

Vue CLI 需要 [Node.js](https://nodejs.org/) 14.17 或更高版本 (推荐 16.4+)。由于node.js的版本更新迭代很快，所以你可能会遇到同一台电脑来维护多个版本的node.js开发的项目，那么自己电脑上对于多个nodejs的解释器管理起来就比较困难了，所以你可以使用 [nvm](https://github.com/creationix/nvm) 或 [nvm-windows](https://github.com/coreybutler/nvm-windows)在同一台电脑中管理多个 Node 版本。

nvm工具的下载和安装： https://www.jianshu.com/p/d0e0935b150a

​                                  	    https://www.jianshu.com/p/622ad36ee020

常用的nvm命令

```shell
nvm ls-remote               # 列出目前官方发布的node版本
nvm list                    # 列出目前在nvm里面安装的所有node版本
nvm install node版本号      # 安装指定版本的node.js   v16.5.0

例子：nvm install v16.5.0

nvm uninstall node版本号      # 卸载指定版本的node.js
nvm use node版本号            # 切换当前使用的node.js版本
nvm alias default node版本号  # 设置当前系统默认采用的node.js版本
```



##### 直接安装node.js

​	Node.js是一个新的后端(后台)语言，它的语法和JavaScript类似，所以可以说它是属于前端的后端语言，后端语言和前端语言的区别：

- 运行环境：后端语言一般运行在服务器端，前端语言运行在客户端的浏览器上

- 功能：后端语言可以操作文件，可以读写数据库，前端语言不能操作文件，不能读写数据库。

  我们一般安装LTS(长线支持版本)：

  下载地址：https://nodejs.org/en/download/【上面已经安装了nvm，那么这里不用手动安装了】

​	下载之后双击安装，一路点击下一步就可以了。

node.js的版本有两大分支：

```
官方发布的node.js版本：0.xx.xx 这种版本号就是官方发布的版本
社区发布的node.js版本：xx.xx.x  就是社区开发的版本
```

Node.js如果安装成功，可以查看Node.js的版本,在终端输入如下命令：

```
node -v
npm -v   #pip
```

在安装node.js完成后，在node.js中会同时帮我们安装一个npm包管理器npm。我们可以借助npm命令来安装node.js的包。这个工具相当于python的pip/yarn管理器。

#### npm

常用指令

```shell
npm install -g 包名              # 安装模块   -g表示全局安装，如果没有-g，则表示在当前项目安装
npm list                        # 查看当前目录下已安装的node包
npm view 包名 engines            # 查看包所依赖的Node的版本 
npm outdated                    # 检查包是否已经过时，命令会列出所有已过时的包
npm update 包名                  # 更新node包
npm uninstall 包名               # 卸载node包
npm 命令 -h                      # 查看指定命令的帮助文档
```

如果npm大家觉得速度比较慢，可以安装cnpm来进行国内包源的下载

#### cnpm介绍

1. 说明：因为谷歌安装插件是从国外服务器下载，受网络影响大，可能出现异常，如果谷歌的服务器在中国就好了，所以我们乐于分享的淘宝团队干了这事，来自官网：“这是一个完整npmjs.org镜像，你可以用此代替官方版本（只读），同步频率目前为10分钟一次以保证尽量与官方服务同步“。
2. 官方网址：[http://npm.taobao.org](http://npm.taobao.org/)
3. 安装：命令提示符执行`npm install cnpm -g --registry=https://registry.npm.taobao.org`
4. 注意：安装完后最好查看其版本cnpm -v或关闭命令提示符重新打开，安装完直接使用有可能会出现错误 

```shell
//临时使用
npm install jquery --registry https://registry.npm.taobao.org

//可以把这个选型配置到文件中，这样不用每一次都很麻烦
npm config set registry https://registry.npm.taobao.org

//验证是否配置成功 
npm config list 或者 npm config get registry

//安装cnpm，在任意目录下都可执行,--global是全局安装，不可省略
npm install --global cnpm 或者 npm install -g cnpm --registry=https://registry.npm.taobao.org

//安装后直接使用
cnpm install jquery
```

说明：NPM（节点包管理器）是的NodeJS的包管理器，用于节点插件管理（包括安装，卸载，管理依赖等）

1. 使用NPM安装插件：命令提示符执行`npm install <name> [-g] [--save-dev]` 
   `<name>`：节点插件名称。 
   例：`npm install gulp-less --save-dev`
2. `-g`：全局安装。 将会安装在C：\ Users \ Administrator \ AppData \ Roaming \ npm，并且写入系统环境变量;非全局安装：将会安装在当前定位目录;全局安装可以通过命令行任何地方调用它，本地安装将安装在定位目录的node_modules文件夹下，通过要求（）调用;
3. `--save`：将保存至的package.json（的package.json是的NodeJS项目配置文件）
4. `-dev`;：保存至的package.json的devDependencies节点，不指定-dev将保存至依赖节点

为什么要保存至的的package.json？因为节点插件包相对来说非常庞大，所以不加入版本管理，将配置信息写入的的package.json并将其加入版本管理，其他开发者对应下载即可（命令提示符执行npm install，则会根据package.json下载所有需要的包）



#### 安装vue-cli

安装指令

```shell
npm install -g vue-cli
npm install -g vue-cli --registry https://registry.npm.taobao.org

// 目前直接安装，自动安装的vue-cli的版本为2.9.6，后面开发我们就使用这个版本
如果想安装其他版本或者学习vue-cli的更多功能，大家可以参考文档，地址：https://cli.vuejs.org/zh/
```





### vue-cli创建项目

#### 创建项目

​	使用vue自动化工具可以快速搭建单页应用项目目录。

​	该工具为现代化的前端开发工作流提供了开箱即用的构建配置。只需几分钟即可创建并启动一个带热重载、保存时静态检查以及可用于生产环境的构建配置的项目：

```bash
// 生成一个基于 webpack 模板的新项目
vue init webpack 项目目录名
例如：
cd ~/Desktop/hippo
vue init webpack hippo_web


// 启动开发服务器 ctrl+c 停止服务
cd hippo_web
npm run dev           # 运行这个命令就可以启动node提供的测试http服务器
```

![1626494822358](3%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%A7%8B%E5%8C%96.assets/1626494822358.png)

那么访问一下命令执行完成后提示出来的网址就可以看到网站了：http://localhost:8080/

项目创建完成之后，我们会看到hippo_web项目其实是一个文件夹，我们进入到文件夹内部就会发现一些目录和文件，我们简单介绍一下它们都是干什么的

#### 项目目录结构介绍

```python
src   主开发目录，要开发的单文件组件全部在这个目录下的components目录下

static或src/assets 静态资源目录，所有的css，js，图片等文件放在这个文件夹

dist  项目打包发布文件夹，目前没有这个文件夹，最后要上线单文件项目文件都在这个文件夹中	
	  后面打包项目,让项目中的vue组件经过编译变成js 代码以后,dist就出现了

node_modules目录是node的包目录，

config是配置目录

build是项目打包时依赖的目录

src/router   路由,是我们创建项目的时候，如果选择安装vue-router，就自动会生成这个目录。
```



创建项目时，提示信息的处理方式

目录结构详细介绍

![image-20210114205554581](3%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%A7%8B%E5%8C%96.assets/image-20210114205554581.png)



#### 项目执行流程图

![image-20210114210802287](3%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%A7%8B%E5%8C%96.assets/image-20210114210802287.png)



### 单文件组件的使用

组件有两种：普通组件、单文件组件

普通组件的缺点：

1. html代码是作为js的字符串进行编写，所以组装和开发的时候不易理解，而且没有高亮效果。
2. 普通组件用在小项目中非常合适，但是复杂的大项目中，如果把更多的组件放在html文件中，那么维护成本就会变得非常昂贵。
3. 普通组件只是整合了js和html，但是css代码被剥离出去了。使用的时候的时候不好处理。



将一个组件相关的html结构，css样式，以及交互的JavaScript代码从html文件中剥离出来，合成一个文件，这种文件就是单文件组件，相当于一个组件具有了结构、表现和行为的完整功能，方便组件之间随意组合以及组件的重用，这种文件的扩展名为“.vue”，比如："Home.vue"。

如果使用的是PyCharmIDE，需要我们自行下载vue的插件，在配置中找到plugins，然后搜索vue.js，点击下载，下载完成之后重启PyCharm就可以了



### 初始化项目

删除某些文件 ，删除App.vue组件的默认css样式和一些无用标签，修改vue-router.js文件中的mode模式，创建ShowCenter.vue组件，配置访问路径，介绍ShowCenter.vue文件的结构，补充代码部分等工作，先做出我们的展示中心页面。

main.js

```js
import Vue from 'vue'
import App from './App'
import router from './router'
Vue.config.productionTip = false

/* eslint-disable no-new */
new Vue({
  el: '#app',
  router,
  components: { App },
  template: '<App/>'
})
```



App.vue

```html
<template>
  <div id="app">
    <router-view/>
  </div>
</template>

<script>
export default {
  name: 'App'
}
</script>

<style>
  blockquote,body,button,dd,dl,dt,fieldset,form,h1,h2,h3,h4,h5,h6,hr,input,legend,li,ol,p,pre,td,textarea,th,ul{margin:0;padding:0}
  html{color:#000;overflow-y:scroll;}
  body,button,input,select,textarea{font-size:12px;font-family:"PingFang SC",Arial,"Microsoft YaHei",sans-serif}
  h1,h2,h3,h4,h5,h6{font-size:100%}
  em{font-style:normal}
  small{font-size:12px}
  ol,ul{list-style:none}
  a{text-decoration:none}
  a:hover{text-decoration:underline}
  legend{color:#000}
  fieldset,img{border:0}
  button,input,select,textarea{font-size:100%}
  table{border-collapse:collapse;border-spacing:0}
  img{-ms-interpolation-mode:bicubic}
  textarea{resize:vertical}
</style>

```



ShowCenter.vue

```html
<template>
    <div class="show_center">
      <h1>展示中心页面</h1>
    </div>
</template>

<script>
export default {
  name: "ShowCenter"
}
</script>

<style scoped>

</style>

```

src/router/index.js

```js
import Vue from 'vue'
import Router from 'vue-router'

Vue.use(Router)
import ShowCenter from "../components/ShowCenter";

export default new Router({
  mode: "history",
  routes: [
    {
      path: '/',
      name: 'ShowCenter',
      component: ShowCenter,
    }
  ]
})

```

启动项目，终端进入到项目目录下，执行`npm run dev`

访问http://localhost:8080  就看到了我们的展示中心页面。

#### 调整运行配置

为了方便开发，我们做一些配置调整

将项目目录下面的config/index.js的配置做如下调整

```js
module.exports = {
  dev: {

    // Paths
    assetsSubDirectory: 'static',
    assetsPublicPath: '/',
    proxyTable: {},

    // Various Dev Server settings
    // 修改一下启动时的域名
    host: 'www.hippo.cn', // can be overwritten by process.env.HOST
    port: 8080, // can be overwritten by process.env.PORT, if port is in use, a free one will be determined
    ...
  }
}
```



在开发过程中，我们可能经常会在前端使用的某些变量，我们可以添加到某个配置文件中，比如我们在src目录下创建一个settings.js文件

```js
export default {  // 注意，对象要抛出后，其他文件中才能引入使用
  host:'http://api.hippo.cn:8000' // 我们的后台项目将来就通过这个域名和端口来启动
}
```

为了方便后面其他组件使用该配置，我们在main.js文件中引入封装一下

```js
// The Vue build version to load with the `import` command
// (runtime-only or standalone) has been set in webpack.base.conf with an alias.
import Vue from 'vue'
import App from './App'
import router from './router'

// 加载项目的业务配置文件
import settings from "./settings";
Vue.prototype.$settings = settings;  // prototype 原型链

Vue.config.productionTip = false

/* eslint-disable no-new */
new Vue({
  el: '#app',
  router,
  components: { App },
  template: '<App/>'
})
```

将来就可以在任意一个组件中，通过vm对象直接调用声明的$settings子属性了。

```vue
<template>
    <div class="show_center">
      <h1>展示中心页面</h1>
    </div>
</template>

<script>
export default {
  name: "ShowCenter",
  created(){
    console.log(this.$settings.host)
  }
}
</script>

<style scoped>

</style>
```



#### 安装axios

后面我们需要在前端来获取后端的数据，意味着要发送请求，我们使用axios模块来进行请求的发送，它的特点和ajax一样：异步请求。

```shell
项目根目录下（node_modules同级目录下）执行如下命令
cd ~/Desktop/hippo/hippo_web
npm install -S axios --registry https://registry.npm.taobao.org
```

然后在main.js文件中引入

```js
// The Vue build version to load with the `import` command
// (runtime-only or standalone) has been set in webpack.base.conf with an alias.
import Vue from 'vue'
import App from './App'
import router from './router'

// 加载项目的业务配置文件
import settings from "./settings";
Vue.prototype.$settings = settings;  // prototype 原型链

// ajax
import axios from "axios"
axios.defaults.withCredentials = false; // 是否在ajax请求时允许携带cookie到服务端
Vue.prototype.$axios = axios;

Vue.config.productionTip = false

/* eslint-disable no-new */
new Vue({
  el: '#app',
  router,
  components: { App },
  template: '<App/>'
})

```

git添加代码版本

```bash
cd ~/Desktop/hippo
git add .
git commit -m "客户端项目搭建"
git push -u origin master
```



接下来我们将展示中心页面写的好看一些。

我们本次前端使用的插件是Ant Design，能够帮我们快速优雅的完成前端页面效果，下面介绍一下

## ant-design插件

### 介绍

​	Ant Design 是一个致力于提升『用户』和『设计者』使用体验的中台设计语言。它模糊了产品经理、交互设计师、视觉设计师、前端工程师、开发工程师等角色边界，将进行 UE 设计和 UI 设计人员统称为『设计者』，利用统一的规范进行设计赋能，全面提高中台产品体验和研发效率，是蚂蚁金服出品的开源框架。

​	Ant Design 官方介绍： "在中台产品的研发过程中，会出现不同的设计规范和实现方式，但其中往往存在很多类似的页面和组件，给设计师和工程师带来很多困扰和重复建设，大大降低了产品的研发效率。"

​	蚂蚁金服体验技术部经过大量的项目实践和总结，沉淀出设计语言 Ant Design，这可不单纯只是设计原则、控件规范和视觉尺寸，还配套有前端代码实现方案。也就是说采用Ant Design后，UI设计和前端界面研发可同步完成，效率大大提升。目前有阿里、美团、滴滴、简书采用。Ant Design有Web版和Moblie版。

​	如果前端这些插件都是我们通过js或者jquery手撸的话，工作量太重不说，效率还低。

​	Ant Design 则封装了一系列高质量的 React 组件，十分适用于在企业级的应用中，框架提供的 api 十分详尽，上手和使用相对简单，值得一提的是， Ant Design 使用 ES6 进行编写，因此使用过程中对 ES6 也是一次学习的机会。

​	我们现在学习的是vue框架和ant-desigin的兼容，那么已经有高手开源出了一套ant-design的vue实现，下面我们就来学习使用。

ant-desigin特点

-  专为Web应用程序设计的企业级UI。
-  开箱即用的一组高质量React组件。
-  用具有可预测的静态类型的TypeScript编写。
-  整套设计资源和开发工具。
-  支持数十种语言的国际化。
-  强大的主题自定义细节。



### 常用网址

官网：https://ant.design/

github网址：https://github.com/ant-design/ant-design



antdv工具的使用，全称 Ant Design of Vue。

官网地址：https://www.antdv.com/docs/vue/introduce-cn/

Ant Design of Vue的使用，我们在项目中学习。



### 安装上手

```vue
npm i --save ant-design-vue
改源来安装：
npm install ant-design-vue --registry=https://registry.npm.taobao.org -S
```

在main.js文件中引入

```js
// The Vue build version to load with the `import` command
// (runtime-only or standalone) has been set in webpack.base.conf with an alias.
import Vue from 'vue'
import App from './App'
import router from './router'

// import Antd from 'ant-design-vue';
import Antd from 'ant-design-vue';
Vue.use(Antd);
import 'ant-design-vue/dist/antd.css';

Vue.config.productionTip = false

/* eslint-disable no-new */
new Vue({
  el: '#app',
  router,
  components: { App },
  template: '<App/>'
})

```

我们现在已经把ant design 组件成功运行起来了



但是在开发过程中还有很多问题，例如上面的例子实际上加载了全部的 antd 组件的样式（对前端性能是个隐患）。

此时我们需要对 vue-cli 的默认配置进行自定义。安装高级配置工具，让antd组件在项目中使用了哪些就自动引入哪些，不会将ant的组件全部引入。终端下安装：

```bash
npm install babel-plugin-import --dev
```

修改项目根目录下的`.babelrc`文件，配置 babel-plugin-import

```js
  {
    "presets": [
      ["env", {
        "modules": false,
        "targets": {
          "browsers": ["> 1%", "last 2 versions", "not ie <= 8"]
        }
      }],
      "stage-2"
    ],
-   "plugins": ["transform-vue-jsx", "transform-runtime"]
+   "plugins": [
+     "transform-vue-jsx",
+     "transform-runtime",
+     ["import", { "libraryName": "Antd", "libraryDirectory": "es", "style": "css" }]
+   ]
  }
```

减号表示去掉的，加号表示需要添加上的



下面测试一下效果，我们在ShowCenter.vue组件中引入一个ant-design的button按钮，看看怎么样

```html
<template>
    <div class="show_center">
      <h1>展示中心页面</h1>
      <a-button type="danger">
        Danger
      </a-button>
    </div>
</template>

<script>
    export default {
        name: "ShowCenter"
    }
</script>

<style scoped>

</style>

```

好，效果有了

### 中文支持

在使用某些插件(比如时间日期选择框等)的时候，需要我们来做中文支持，App.vue，设置如下

```html
<template>
  <div id="app">
    <a-config-provider :locale="$settings.locale">
    <router-view/>
    </a-config-provider>
  </div>
</template>

<script>
export default {
  name: 'App'
}
</script>

<style>
  blockquote,body,button,dd,dl,dt,fieldset,form,h1,h2,h3,h4,h5,h6,hr,input,legend,li,ol,p,pre,td,textarea,th,ul{margin:0;padding:0}
  html{color:#000;overflow-y:scroll;}
  body,button,input,select,textarea{font-size:12px;font-family:"PingFang SC",Arial,"Microsoft YaHei",sans-serif}
  h1,h2,h3,h4,h5,h6{font-size:100%}
  em{font-style:normal}
  small{font-size:12px}
  ol,ul{list-style:none}
  a{text-decoration:none}
  a:hover{text-decoration:underline}
  legend{color:#000}
  fieldset,img{border:0}
  button,input,select,textarea{font-size:100%}
  table{border-collapse:collapse;border-spacing:0}
  img{-ms-interpolation-mode:bicubic}
  textarea{resize:vertical}
</style>
```

src/settings.js，代码：

```javascript
import zhCN from 'ant-design-vue/lib/locale-provider/zh_CN';
export default {  // 注意，对象要抛出后，其他文件中才能引入使用
  host:'http://api.hippo.cn:8000', // 我们的后台项目将来就通过这个域名和端口来启动
  locale: zhCN, // 语言
}
```



## echarts图表插件

由于我们有很多的图表数据展示，而Ant-desigin中没有很优秀的图表插件，所以我们还需要借助其他开源插件，比如echarts和highcharts，我们本次采用的是百度开源的echarts，那么我们如何引入使用呢，看下面的步骤。

官网地址：http://echarts.apache.org/zh/index.html

vue中使用echarts： https://echarts.apache.org/zh/tutorial.html#%E5%9C%A8%20webpack%20%E4%B8%AD%E4%BD%BF%E7%94%A8%20ECharts

下载：

```shell
npm install echarts --save --registry=https://registry.npm.taobao.org
```

为了方便后面组件的使用，我们在main.js中引入一下

```js
// echarts图标插件
import * as echarts from 'echarts';
Vue.prototype.$echarts = echarts;
```



在ShowCenter.vue组件中简单使用

```html
<template>
    <div class="show_center">
      <h1>展示中心页面</h1>
      <a-button type="primary">
        Primary
      </a-button>
      <a-date-picker @change="onChange" />
      <div ref="main" style="height: 500px;width: 500px;"></div>
    </div>
</template>

<script>

export default {
  name: "ShowCenter",
  data(){
    return {
    }
  },
  created(){
    console.log(this.$settings.host)
  },
  mounted() {
    this.show_echarts();
  },
  methods:{
    onChange(date, dateString) {
      console.log(date, dateString);
    },
    show_echarts(){
        var myChart = this.$echarts.init(this.$refs.main);
        // 绘制图表
        myChart.setOption({
            title: {
                text: 'ECharts 入门示例'
            },
            tooltip: {},
            xAxis: {
                data: ['衬衫', '羊毛衫', '雪纺衫', '裤子', '高跟鞋', '袜子']
            },
            yAxis: {},
            series: [{
                name: '销量',
                type: 'bar',
                data: [5, 20, 36, 10, 10, 20]
            }]
        });
    }
  }
}
</script>

<style scoped>

</style>
```

好，到此前端项目初始化完成。



## 项目页面展示

### 登录组件页面展示

src/components/Login.vue，代码：

```html
<template>
	<div class="login box">
		<img src="../assets/login.jpg" alt="">
		<div class="login">
			<div class="login-title">
				<img src="../assets/login3.jpeg" alt="">
				<p>Hippo!</p>
			</div>
			<div class="login_box">
				<div class="title">
					<span>登录</span>
				</div>
				<div class="inp">
					<input v-model="username" type="text" placeholder="用户名" class="user">
					<input v-model="password" type="password" class="pwd" placeholder="密码">
					<div class="rember">
						<p>
							<input type="checkbox" class="no" v-model="remember"/>
							<span>记住密码</span>
						</p>

					</div>
					<button class="login_btn" @click="login">登录</button>

				</div>

			</div>
		</div>
	</div>
</template>

<script>
export default {
  name: "Login",
  data(){
    return {
        remember: false,
        username:"",
        password:"",
    }
  },
  methods:{
    login(){
      this.$axios.post(`/users/login/`,{

      }).then((res)=>{
        // locatStorage或者sessionStorage中存储token
        // 跳转到首页
        // 首页加载时验证token有效性
      })
    },
  },
}
</script>

<style scoped>
.box{
    width: 100%;
    height: 100%;
    position: relative;
    overflow: hidden;
}
.box img{
    width: 100%;
    min-height: 100%;
}
.box .login {
    position: absolute;
    width: 500px;
    height: 400px;
    top: 0;
    left: 0;
    margin: auto;
    right: 0;
    bottom: 0;
    top: -338px;
}
.login .login-title{
    width: 100%;
    text-align: center;
}
.login-title img{
    width: 190px;
    height: auto;
}
.login-title p{
    font-family: PingFangSC-Regular;
    font-size: 18px;
    color: #fff;
    letter-spacing: .29px;
    padding-top: 10px;
    padding-bottom: 50px;
}
.login_box{
    width: 400px;
    height: auto;
    background: rgba(255,255,255,0.3);
    box-shadow: 0 2px 4px 0 rgba(0,0,0,.5);
    border-radius: 4px;
    margin: 0 auto;
    padding-bottom: 40px;
}
.login_box .title{
    font-size: 20px;
    color: #9b9b9b;
    letter-spacing: .32px;
    border-bottom: 1px solid #e6e6e6;
    display: flex;
    justify-content: space-around;
    padding: 50px 60px 0 60px;
    margin-bottom: 20px;
    cursor: pointer;
}
.login_box .title span:nth-of-type(1){
    color: #4a4a4a;
    border-bottom: 2px solid #396fcc;
}

.inp{
    width: 350px;
    margin: 0 auto;
}
.inp input{
    border: 0;
    outline: 0;
    width: 100%;
    height: 45px;
    border-radius: 4px;
    border: 1px solid #d9d9d9;
    text-indent: 20px;
    font-size: 14px;
    background: #fff !important;
}
.inp input.user{
    margin-bottom: 16px;
}
.inp .rember{
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: relative;
    margin-top: 10px;
}
.inp .rember p:first-of-type{
    font-size: 12px;
    color: #4a4a4a;
    letter-spacing: .19px;
    margin-left: 22px;
    display: -ms-flexbox;
    display: flex;
    -ms-flex-align: center;
    align-items: center;
    /*position: relative;*/
}
.inp .rember p:nth-of-type(2){
    font-size: 14px;
    color: #9b9b9b;
    letter-spacing: .19px;
    cursor: pointer;
}

.inp .rember input{
    outline: 0;
    width: 30px;
    height: 45px;
    border-radius: 4px;
    border: 1px solid #d9d9d9;
    text-indent: 20px;
    font-size: 14px;
    background: #fff !important;
}

.inp .rember p span{
    display: inline-block;
    font-size: 12px;
    width: 100px;
    /*position: absolute;*/
    /*left: 20px;*/
}
#geetest{
	margin-top: 20px;
}
.login_btn{
     width: 100%;
    height: 45px;
    background: #396fcc;
    border-radius: 5px;
    font-size: 16px;
    color: #fff;
    letter-spacing: .26px;
    margin-top: 30px;
}
.inp .go_login{
    text-align: center;
    font-size: 14px;
    color: #9b9b9b;
    letter-spacing: .26px;
    padding-top: 20px;
}
.inp .go_login span{
    color: #84cc39;
    cursor: pointer;
}
</style>
```

由于除了登录页面之外我们后面所有的组件都具备顶部导航栏和左侧菜单栏的效果，所以我直接将共有效果放到了一个Base.vue组件中。

里面通过 ant design vue中的

布局组件：https://www.antdv.com/components/layout-cn/

导航菜单组件：https://www.antdv.com/components/menu-cn/

两个组件搭配使用

### Base组件初始化

布局和导航菜单搭建Base.vue，页面效果，简单如下

```vue
<template>
  <div id="app">
    <a-layout id="components-layout-demo-custom-trigger">
      <a-layout-sider v-model="collapsed" :trigger="null" collapsible>
        <div class="logo"/>
        <a-menu
          :default-selected-keys="['1']"
          :default-open-keys="['sub1']"
          mode="inline"
          theme="dark"
          :inline-collapsed="collapsed"
          @select="selectedHandler"
        >
          <a-menu-item key="1">
            <a-icon type="pie-chart"/>
            <span>Option 1</span>
          </a-menu-item>
          <a-menu-item key="2">
            <a-icon type="desktop"/>
            <span>Option 2</span>
          </a-menu-item>
          <a-menu-item key="3">
            <a-icon type="inbox"/>
            <span>Option 3</span>
          </a-menu-item>
          <a-sub-menu key="sub1">
            <span slot="title"><a-icon type="mail"/><span>Navigation One</span></span>
            <a-menu-item key="5">
              Option 5
            </a-menu-item>
            <a-menu-item key="6">
              Option 6
            </a-menu-item>
            <a-menu-item key="7">
              Option 7
            </a-menu-item>
            <a-menu-item key="8">
              Option 8
            </a-menu-item>
          </a-sub-menu>
          <a-sub-menu key="sub2">
            <span slot="title"><a-icon type="appstore"/><span>Navigation Two</span></span>
            <a-menu-item key="9">
              Option 9
            </a-menu-item>
            <a-menu-item key="10">
              Option 10
            </a-menu-item>
            <a-sub-menu key="sub3" title="Submenu">
              <a-menu-item key="11">
                Option 11
              </a-menu-item>
              <a-menu-item key="12">
                Option 12
              </a-menu-item>
            </a-sub-menu>
          </a-sub-menu>
        </a-menu>
      </a-layout-sider>
      <a-layout>
        <a-layout-header style="background: #fff; padding: 0">
          <a-icon
            class="trigger"
            :type="collapsed ? 'menu-unfold' : 'menu-fold'"
            @click="() => (collapsed = !collapsed)"
          />
        </a-layout-header>
<a-layout-content
          :style="{ margin: '24px 16px', padding: '24px', background: '#fff', minHeight: '280px' }"
        >
        <router-view></router-view>

  </a-layout-content>
      </a-layout>
    </a-layout>
  </div>
</template>
<script>
  export default {
    name:'App',
    data() {
      return {
        collapsed: false,
        
    },
    methods: {
      toggleCollapsed() {
        this.collapsed = !this.collapsed;
      },
      selectedHandler(item, key, selectedKeys){
        console.log('>>>>>',item, key, selectedKeys);
      }
    },
  };
</script>
<style scoped>
  #components-layout-demo-custom-trigger .trigger {
    font-size: 18px;
    line-height: 64px;
    padding: 0 24px;
    cursor: pointer;
    transition: color 0.3s;
  }

  #components-layout-demo-custom-trigger .trigger:hover {
    color: #1890ff;
  }

  #components-layout-demo-custom-trigger .logo {
    height: 32px;
    background: rgba(255, 255, 255, 0.2);
    margin: 16px;
  }
</style>

```



### Base组件修改效果

```html
<template>
    <div id="app">
    <a-layout id="components-layout-demo-custom-trigger">
      <a-layout-sider v-model="collapsed" :trigger="null" collapsible>
        <div class="logo"/>
        <a-menu :default-selected-keys="['1']" :default-open-keys="['sub1']" mode="inline" theme="dark" :inline-collapsed="collapsed" @select="selectedHandler">
          <template v-for="(menu,index) in menu_list">
            <a-menu-item v-if="menu.children.length===0" :key="menu.id">
              <router-link :to="menu.menu_url">
                <a-icon type="mail"/>
                {{menu.title}}
              </router-link>
            </a-menu-item>
            <a-sub-menu v-else :key="menu.id">
              <span slot="title">
                <a-icon :type="menu.icon"/>
                <span>{{menu.title}}</span>
              </span>
              <a-menu-item v-for="(child_menu,child_index) in menu.children" :key="child_menu.id">
                <router-link :to="child_menu.menu_url">{{child_menu.title}}</router-link>
              </a-menu-item>

            </a-sub-menu>
          </template>
        </a-menu>
      </a-layout-sider>
      <a-layout>
        <a-layout-header style="background: #fff; padding: 0">
          <a-icon
            class="trigger"
            :type="collapsed ? 'menu-unfold' : 'menu-fold'"
            @click="() => (collapsed = !collapsed)"
          />
        </a-layout-header>
        <a-layout-content :style="{ margin: '24px 16px', padding: '24px', background: '#fff', minHeight: '280px' }" >
            <router-view></router-view>
        </a-layout-content>
      </a-layout>
    </a-layout>
  </div>
</template>
<script>
export default {
  name: "Base",
  data() {
      return {
        collapsed: false,
        menu_list: [
          {id: 1,icon:'mail', title: '展示中心', tube: '', 'menu_url': '/hippo/workbench', children: []},
          {id: 2,icon:'mail', title: '资产管理', 'menu_url': '/hippo/host', children: []},
          {id: 3,icon:'bold', title: '批量任务', tube: '', 'menu_url': '/hippo/workbench', children: [
              {id: 10, icon:'mail',title: '执行任务', 'menu_url': '/hippo/multi_exec'},
              {id: 11, icon:'mail', title: '命令管理', 'menu_url': '/hippo/template_manage'},
          ]},
          {id: 4,icon:'highlight', title: '代码发布', tube: '', 'menu_url': '/hippo/workbench', children: [
              {id: 12,  title: '应用管理', 'menu_url': '/hippo/release'},
              {id: 13,  title: '发布申请', 'menu_url': '/hippo/release'},
          ]},
          {id: 5,icon:'mail', title: '定时计划', tube: '', 'menu_url': '/hippo/workbench', children: []},
          {id: 6,icon:'mail', title: '配置管理', tube: '', 'menu_url': '/hippo/workbench', children: [
              {id: 14,  title: '环境管理', 'menu_url': '/hippo/environment'},
              {id: 15,  title: '服务配置', 'menu_url': '/hippo/workbench'},
              {id: 16,  title: '应用配置', 'menu_url': '/hippo/workbench'},
          ]},
          {id: 7,icon:'mail', title: '监控', tube: '', 'menu_url': '/hippo/workbench', children: []},
          {id: 8,icon:'mail', title: '报警', tube: '', 'menu_url': '/hippo/workbench', children: [
              {id: 17,  title: '报警历史', 'menu_url': '/hippo/workbench'},
              {id: 18,  title: '报警联系人', 'menu_url': '/hippo/workbench'},
              {id: 19,  title: '报警联系组', 'menu_url': '/hippo/workbench'},
          ]},
          {id: 9,icon:'mail', title: '用户管理', tube: '', 'menu_url': '/hippo/workbench', children: [
              {id: 20,  title: '账户管理', tube: '', 'menu_url': '/hippo/workbench'},
              {id: 21,  title: '角色管理', tube: '', 'menu_url': '/hippo/workbench'},
              {id: 22,  title: '系统设置', tube: '', 'menu_url': '/hippo/workbench'},
          ]},
        ]
      };
    },
    methods: {
      selectedHandler(item, key, selectedKeys) {
        console.log('>>>>>', item, key, selectedKeys);
      }
    },
}
</script>

<style scoped>
#components-layout-demo-custom-trigger .trigger {
  font-size: 18px;
  line-height: 64px;
  padding: 0 24px;
  cursor: pointer;
  transition: color 0.3s;
}

#components-layout-demo-custom-trigger .trigger:hover {
  color: #1890ff;
}

#components-layout-demo-custom-trigger .logo {
  height: 32px;
  background: rgba(255, 255, 255, 0.2);
  margin: 16px;
}
</style>

```

接下来，我们需要把ShowCenter和其他将来的功能组件的页面嵌套到Base页面的右下角。针对这种页面显示效果，我们可以采用vue-router提供的嵌套路由来完成。

https://router.vuejs.org/zh/guide/essentials/nested-routes.html

![1626507024782](3%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%A7%8B%E5%8C%96.assets/1626507024782.png)

ShowCenter.vue

```html
<template>
    <div class="show_center">
      <h1>展示中心页面</h1>
      <a-button type="primary">
        Primary
      </a-button>
      <a-date-picker @change="onChange" />
      <div ref="main" style="height: 500px;width: 500px;"></div>
    </div>
</template>

<script>

export default {
  name: "ShowCenter",
  data(){
    return {
    }
  },
  created(){
    console.log(this.$settings.host)
  },
  mounted() {
    this.show_echarts();
  },
  methods:{
    onChange(date, dateString) {
      console.log(date, dateString);
    },
    show_echarts(){
        var myChart = this.$echarts.init(this.$refs.main);
        // 绘制图表
        myChart.setOption({
            title: {
                text: 'ECharts 入门示例'
            },
            tooltip: {},
            xAxis: {
                data: ['衬衫', '羊毛衫', '雪纺衫', '裤子', '高跟鞋', '袜子']
            },
            yAxis: {},
            series: [{
                name: '销量',
                type: 'bar',
                data: [5, 20, 36, 10, 10, 20]
            }]
        });
    }
  }
}
</script>

<style scoped>

</style>
```

Host.vue

```html
<template>
    <div class="host">
      <h1>host页面</h1>
    </div>
</template>

<script>
  export default {
    name: "Host"
  }
</script>

<style scoped>

</style>

```



## 路由配置

由于我们使用了组件嵌套，所以我们要通过路由嵌套来进行控制

Router/index.js

```js
import Vue from 'vue'
import Router from 'vue-router'

Vue.use(Router)
import Base from "../components/Base";
import Login from "../components/Login";
import ShowCenter from "../components/ShowCenter";
import Host from '@/components/Host'

export default new Router({
  mode: "history",
  routes: [
    {
      path: '/',
      name: 'Login',
      component: Login,
    },
    {
      path: '/hippo',
      name: 'Base',
      component: Base,
      children: [
        {
          path: 'workbench',  // 访问路径： 父级路由 + 当前路由
          name: 'ShowCenter',
          component: ShowCenter,
        },
        {
          path: 'host',
          name: 'Host',
          component: Host,
        },
      ]
    },

  ]
})
```

git提交代码版本

```bash
cd ~/Desktop/hippo
git add .
git commit -m "客户端页面基本展示"
git push
```



































