# 常用指令

指令 (Directives) 是带有“v-”前缀的特殊属性，由vue提供的。每一个指令在vue中都有固定的作用。

在vue中，提供了很多指令，常用的有：v-if、v-model、v-for等等。

指令会在vm对象的data选项数据发生变化时，会同时改变元素中的其控制的内容或属性。

因为vue的历史版本原因，所以有一部分指令都有两种写法：

```
vue1.x写法             vue2.x/vue3.x的写法
v-html         ---->   v-html
{{ 普通文本 }}          {{普通文本}}  v-text="普通文本"
v-bind:属性名   ---->   :属性
v-on:事件名     ---->   @事件名
```



## 2.1 属性操作

格式：

```
<标签名 :标签属性="data属性"></标签名>
```



```html
<p :title="str1">{{ str1 }}</p> <!-- 也可以使用v-html显示双标签的内容，{{  }} 是简写 -->
<a :href="url2">淘宝</a>
<a v-bind:href="url1">百度</a>  <!-- v-bind是vue1.x版本的写法 -->
```

显示wifi密码效果：

```vue
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/vue.3.2.20.js"></script>
</head>
<body>

<div id="app">
    <input :type="type" v-model="password"><button @click="change">{{text}}</button>
</div>

<script>
    const vm = Vue.createApp({
        data(){ // 数据选项
            return {
                type: "password",
                password: "",
                text: "显示密码",
            }
        },
        methods:{ // 方法选项
            change(){
                if(this.type === "password"){
                    this.type = "text";
                    this.text = "隐藏密码";
                }else{
                    this.type = "password";
                    this.text = "显示密码";
                }
            }
        }
    }).mount("#app");
</script>
</body>
</html>
```



## 2.2 事件绑定

有两种事件操作的写法，@事件名 和 v-on:事件名

```html
<button v-on:click="num+=5">按钮</button>
<button @click="num+=5">按钮</button>
```

```
1. 使用@事件名来进行事件的绑定
   语法：
      <h1 @click="num++">{{num}}</h1>

2. 绑定的事件的事件名，全部都是js的事件名：
   @submit   --->  onsubmit
   @focus    --->  onfocus
   @blur     --->  onblur
   @click    --->  onclick
   ....
```



#### 例如:完成商城购物车中的商品增加减少数量

步骤：

1. 给vue对象添加操作数据的方法
2. 在标签中使用指令调用操作数据的方法

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/vue.3.2.20.js"></script>
</head>
<body>

<div id="app">
    <button @click="sub">-</button>
    <input type="text" v-model="num" size="2">
    <button @click="add">+</button>
</div>

<script>
    const vm = Vue.createApp({
        data(){
            return {
                num: 1,   // 当前用户选择的商品数量
                max: 10,  // 商品库存
            }
        },
        methods:{
            sub(){
                // 减少数量
                if(this.num<=1) return ;  // 阻止代码继续往下执行,return 表示函数结束了。
                this.num-=1;
            },
            add(){
                // 增加数量
                if(this.num>=this.max) return ;
                this.num+=1;
            }
        }

    }).mount("#app")
</script>
</body>
</html>
```



## 2.3 操作样式

操作样式，本质就是属性操作，使用冒号：

### 2.3.1 控制标签class类名

```
格式：
   <h1 :class="值">元素</h1>  # 值可以是变量名、对象、对象的变量名、数组、数组变量名
```



```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/vue.3.2.20.js"></script>
    <style>
    .p1{
        background: maroon;
        color: aqua;
    }
    .p2{
        background: yellow;
        color: blue;
    }
    .p3{
        border: 3px solid red;
    }
    </style>
</head>
<body>

<div id="app">
    <p :class="p1_cls" @click="p1_cls='p2'">p1</p>
    <p :class="{p1: use_p1, p2: user_p2}" @click="user_p2=!user_p2">p2</p><!-- 最常用 -->
    <p :class="cls" @click="cls.p2=!cls.p2">p3</p><!-- 最常用 -->
    <p :class="[cls,cls1]">p4</p>
    <p :class="condition?'p1':'p2'">p5</p>
    <p class="p3" :class="condition?'p1':'p2'" @click="condition=!condition">p6</p> <!-- 最常用 -->
</div>

<script>
    const vm = Vue.createApp({
        data(){
            return {
                p1_cls: "p1",
                use_p1: true,
                user_p2: false,
                cls: {
                    p1: true,
                    p2: false
                },
                cls1:{
                    p3: true,
                },
                condition: true,
            }
        }
    }).mount("#app")
</script>
</body>
</html>
```

代码执行效果：

![image-20211026121211737](2%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4.assets/image-20211026121211737.png)

总结：

```html
1. 给元素绑定class类名，最常用的就是第2,3种以及最后一种。
    vue对象的data数据：
        data:{
          myObj:{
            complete:true,
            uncomplete:false,
          }
        }

		html元素：    
    		<div class="box" :class="myObj">2222</div>
    最终浏览器效果：
		    <div class="box complete">2222</div>
```





### 2.3.2 控制标签style样式

工作中基本很少出现style控制样式，一个规范不允许，另一个就是代码不好维护。

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/vue.3.2.20.js"></script>
</head>
<body>

<div id="app">
    <div :style="{color: activeColor, fontSize: fontSize + 'px' }" @click="fontSize+=1">div1</div>
    <div :style="styleObject">div2</div>
    <div :style="[style1,style2]">div3</div>
</div>

<script>
    const vm = Vue.createApp({
        data(){
            return {
                activeColor: "red",
                fontSize: 30,
                styleObject:{
                    fontSize: "30px",
                    backgroundColor: 'yellow'
                },
                style1:{
                    color:"red"
                },
                style2:{
                    background:"orange",
                    fontSize: "21px"
                }
            }
        }
    }).mount("#app")
</script>
</body>
</html>
```



### 2.3.2 实例-vue版本选项卡

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/vue.3.2.20.js"></script>
    <style>
    p{
        padding: 0;
        margin: 0;
    }
    .title-list span{
        display: inline-block; /* 设置元素的显示模式：行级块状元素 */
        height: 60px;
        line-height: 60px;
        width: 120px;
        background-color: #bbb;
        text-align: center;
        cursor: pointer;
    }
    .title-list .activate{
        background-color: yellow;
    }
    .content-list .content{
        background-color: yellow;
        display: none;
        width: 370px;
        height: 280px;
    }
    .content-list .current{
        display: block;
    }
    </style>
</head>
<body>

<div id="optioncart">
    <div class="title-list">
        <span :class="{activate: key === 0}" @click="key=0">国内新闻</span>
        <span :class="{activate: key === 1}" @click="key=1">国际新闻</span>
        <span :class="{activate: key === 2}" @click="key=2">银河新闻</span>
    </div>
    <div class="content-list">
        <div class="content" :class="{current: key ===0}">
            <p>国内新闻列表</p>
            <p>国内新闻列表</p>
            <p>国内新闻列表</p>
            <p>国内新闻列表</p>
            <p>国内新闻列表</p>
        </div>
        <div class="content" :class="{current: key ===1}">
            <p>国际新闻列表</p>
            <p>国际新闻列表</p>
            <p>国际新闻列表</p>
            <p>国际新闻列表</p>
            <p>国际新闻列表</p>
        </div>
        <div class="content" :class="{current: key ===2}">
            <p>银河新闻列表</p>
            <p>银河新闻列表</p>
            <p>银河新闻列表</p>
            <p>银河新闻列表</p>
            <p>银河新闻列表</p>
        </div>
    </div>
</div>

<script>
    const vm = Vue.createApp({
        data(){
            return {
                key: 0,
            }
        }
    }).mount("#optioncart")
</script>
</body>
</html>
```

代码运行效果：

![1552038219804](2%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4.assets/1552038219804.png)